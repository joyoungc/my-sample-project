<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="webjars/jquery/2.2.4/jquery.min.js"></script>
<link rel="stylesheet" type="text/css"
	href="webjars/bootstrap/3.3.7/css/bootstrap.min.css" />
</head>
<body>
	<div class="container">
		<h1>Spring Boot file upload example</h1>

		<form method="POST" enctype="multipart/form-data" id="fileUploadForm">
			<input type="text" name="extraField" /><br /> <br /> <input
				type="file" name="file" /><br /> <br /> <input type="submit"
				value="Submit" id="btnSubmit" class="btn btn-primary" />
		</form>

		<h1>Ajax Post Result</h1>
		<pre>
    <span id="result"></span>
	</pre>
		<div>
			<img src="" id="resultImg"></img>
		</div>

	</div>
	<script>
		$(document).ready(function() {

			$("#btnSubmit").click(function(event) {
				//stop submit the form, we will post it manually.
				event.preventDefault();
				fire_ajax_submit();
			});

		});

		function fire_ajax_submit() {

			// Get form
			var form = $('#fileUploadForm')[0];

			var data = new FormData(form);

			data.append("CustomField", "This is some extra data, testing");

			$("#btnSubmit").prop("disabled", true);

			$.ajax({
				type : "POST",
				enctype : 'multipart/form-data',
				url : "/upload",
				data : data,
				//http://api.jquery.com/jQuery.ajax/
				//https://developer.mozilla.org/en-US/docs/Web/API/FormData/Using_FormData_Objects
				processData : false, //prevent jQuery from automatically transforming the data into a query string
				contentType : false,
				cache : false,
				timeout : 600000,
				success : function(data) {
					alert(data);
					$("#result").text(data);
					$("#resultImg").attr("src", "thumbnail.jpg");
					console.log("SUCCESS : ", data);
					$("#btnSubmit").prop("disabled", false);
				},
				error : function(e) {
					$("#result").text(e.responseText);
					console.log("ERROR : ", e);
					$("#btnSubmit").prop("disabled", false);

				}
			});

		}
	</script>
</body>
</html>